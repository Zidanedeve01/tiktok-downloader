---
import '../styles/global.css';
import { initCSSOptimization } from '../utils/cssOptimization.ts';

export interface Props {
  title: string;
  description?: string;
}
const { title, description = 'Download video TikTok tanpa watermark dengan mudah dan cepat. Gratis dan tanpa registrasi.' } = Astro.props;
---
<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet"></noscript>
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"></noscript>
    <style>
      body { 
        margin: 0; 
        font-family: Inter, system-ui, sans-serif; 
        background-color: #000000; 
        color: #ffffff;
        overflow-x: hidden;
      }
      .min-h-screen { min-height: 100vh; }
      .bg-black { background-color: #000000; }
      .text-white { color: #ffffff; }
      .flex { display: flex; }
      .flex-col { flex-direction: column; }
      .items-center { align-items: center; }
      .justify-center { justify-content: center; }
      .justify-between { justify-content: space-between; }
      .container { 
        max-width: 1200px; 
        margin: 0 auto; 
        padding: 0 1rem; 
      }
      
      @media (min-width: 1400px) {
        .container { max-width: 1400px; }
      }
      
      @media (min-width: 1600px) {
        .container { max-width: 1600px; }
      }
      
      @media (min-width: 1920px) {
        .container { max-width: 1800px; }
      }
      
      @media (min-width: 2560px) {
        .container { max-width: 2400px; }
      }
      
      @media (min-width: 2560px) and (max-height: 1440px) {
        .container { max-width: 2000px; }
      }
      .sticky { position: sticky; }
      .top-0 { top: 0; }
      .z-50 { z-index: 50; }
      .backdrop-blur-xl { backdrop-filter: blur(24px); }
      .border-b { border-bottom-width: 1px; }
      .border-white\/20 { border-color: rgba(255, 255, 255, 0.2); }
      .px-4 { padding-left: 1rem; padding-right: 1rem; }
      .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
      .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
      .font-black { font-weight: 900; }
      
      header a { 
        position: relative; 
        z-index: 60; 
        pointer-events: auto; 
        cursor: pointer; 
        -webkit-tap-highlight-color: transparent;
      }
      header button { 
        position: relative; 
        z-index: 60; 
        pointer-events: auto; 
        cursor: pointer; 
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      .nav-link {
        position: relative;
        overflow: hidden;
        -webkit-tap-highlight-color: transparent;
      }
      
      .mobile-nav-link {
        position: relative;
        overflow: hidden;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
        min-height: 44px;
        display: flex;
        align-items: center;
      }
      
      .mobile-nav-link::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
        transition: left 0.5s;
      }
      
      .mobile-nav-link:hover::before,
      .mobile-nav-link:active::before {
        left: 100%;
      }
      
      #mobile-menu {
        opacity: 1;
        transform: translateY(0);
        transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
      }
      
      #mobile-menu.hidden {
        opacity: 0;
        transform: translateY(-10px);
        pointer-events: none;
      }
      
      #mobile-menu-btn {
        min-width: 44px;
        min-height: 44px;
        touch-action: manipulation;
      }
      
      @media (max-width: 768px) {
        .mobile-nav-link {
          padding: 12px 16px;
          margin: 4px 0;
        }
      }
      
      .loading-placeholder {
        background-color: #1a1a1a;
        animation: loading-pulse 1.5s infinite;
      }
      
      @keyframes loading-pulse {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
      }
      
      .font-loading {
        font-family: system-ui, -apple-system, sans-serif;
      }
      
      .fonts-loaded .font-loading {
        font-family: Inter, system-ui, sans-serif;
      }
    
      #mobile-menu {
        opacity: 0;
        transform: translateY(-10px);
        transition: all 0.3s ease-in-out;
      }
      
      #mobile-menu.show {
        opacity: 1;
        transform: translateY(0);
      }

      @media (hover: none) and (pointer: coarse) {
        .group:active {
          transform: scale(0.95);
        }
      }

      @media (max-width: 768px) {
        * {
          transition: all 0.2s ease-in-out;
        }
      }

      .group:hover .group-hover\:opacity-100 {
        opacity: 1;
      }
      
      .group:hover .group-hover\:visible {
        visibility: visible;
      }
      
      .group:hover .group-hover\:translate-y-0 {
        transform: translateY(0);
      }
      
      @media (hover: hover) {
        .group:hover .group-hover\:scale-110 {
          transform: scale(1.1);
        }
      }
    
      @media (hover: none) {
        .group:active .group-hover\:scale-110 {
          transform: scale(1.05);
        }
      }
      
      .hamburger-icon {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      
      .hamburger-icon div {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .group:hover .group-hover\:opacity-100 {
        animation: fadeInScale 0.3s ease-out;
      }
      
      .group:hover .group-hover\:visible {
        animation: slideDown 0.3s ease-out;
      }
      
      @keyframes fadeInScale {
        0% {
          opacity: 0;
          transform: scale(0.8) translateY(-5px);
        }
        100% {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }
      
      @keyframes slideDown {
        0% {
          transform: translateY(-10px);
          opacity: 0;
        }
        100% {
          transform: translateY(0);
          opacity: 1;
        }
      }
    
      .group:hover .absolute {
        animation: menuAppear 0.3s ease-out;
      }
      
      @keyframes menuAppear {
        0% {
          opacity: 0;
          transform: translateY(-5px) scale(0.95);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
    </style>
  </head>
  <body class="min-h-screen bg-black overflow-x-hidden">
    <div id="app-root" class="min-h-screen flex flex-col">
      <header class="bg-black border-b border-white sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-3 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-2 sm:py-4 lg:py-6">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-2 sm:space-x-4">
              <div class="relative group">
                <div class="w-8 h-8 sm:w-12 sm:h-12 lg:w-14 lg:h-14 xl:w-16 xl:h-16 bg-white rounded-lg sm:rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-white/25 transition-all duration-300 group-hover:scale-105">
                  <i class="fas fa-download text-black text-sm sm:text-xl lg:text-2xl xl:text-3xl"></i>
                </div>
                <div class="absolute -inset-1 bg-white rounded-lg sm:rounded-xl opacity-0 group-hover:opacity-20 transition-opacity duration-300 blur"></div>
              </div>
              <div class="flex-1 min-w-0">
                <a href="/" class="flex items-center space-x-2 transition-all duration-300 hover:scale-105">
                  <h1 class="text-lg sm:text-2xl lg:text-3xl xl:text-4xl 2xl:text-5xl font-black text-white truncate">TikIO</h1>
                </a>
                <p class="text-xs sm:text-sm lg:text-base xl:text-lg text-white/70 font-medium hidden sm:block">Ultra Fast TikTok Downloader</p>
              </div>
            </div>
            
            <nav class="hidden md:flex items-center space-x-2 lg:space-x-4 xl:space-x-6">
              <a href="/" class="nav-link group relative px-4 py-2 lg:px-6 lg:py-3 xl:px-8 xl:py-4 rounded-lg transition-all duration-300 hover:bg-white/10">
                <span class="text-white font-semibold text-sm lg:text-base xl:text-lg 2xl:text-xl group-hover:text-white transition-colors duration-300">Home</span>
                <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-white group-hover:w-full transition-all duration-300"></div>
              </a>
              <a href="/about" class="nav-link group relative px-4 py-2 lg:px-6 lg:py-3 xl:px-8 xl:py-4 rounded-lg transition-all duration-300 hover:bg-white/10">
                <span class="text-white font-semibold text-sm lg:text-base xl:text-lg 2xl:text-xl group-hover:text-white transition-colors duration-300">About</span>
                <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-white group-hover:w-full transition-all duration-300"></div>
              </a>
              <a href="https://github.com/lt-syaii/tikio" target="_blank" rel="noopener noreferrer" class="nav-link group relative px-4 py-2 lg:px-6 lg:py-3 xl:px-8 xl:py-4 rounded-lg transition-all duration-300 hover:bg-white/10 flex items-center space-x-2">
                <i class="fab fa-github text-white text-sm lg:text-base xl:text-lg group-hover:text-white transition-colors duration-300"></i>
                <span class="text-white font-semibold text-sm lg:text-base xl:text-lg 2xl:text-xl group-hover:text-white transition-colors duration-300">Source</span>
                <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-white group-hover:w-full transition-all duration-300"></div>
              </a>
            </nav>
            
            <div class="md:hidden relative group">
              <button class="p-1" onclick="toggleMenu()" type="button" aria-label="Toggle mobile menu">
                <div class="w-8 h-8 bg-white/10 border border-white rounded-lg flex items-center justify-center transition-all duration-300 group-hover:bg-white/20 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-white/25 group-active:scale-95">
                  <!-- Hamburger bars -->
                  <div class="hamburger-icon transition-all duration-300 group-hover:opacity-0 group-hover:rotate-180" id="hamburger-icon">
                    <div class="w-4 h-0.5 bg-white mb-1 transition-all duration-300 group-hover:rotate-45 group-hover:translate-y-1"></div>
                    <div class="w-4 h-0.5 bg-white mb-1 transition-all duration-300 group-hover:opacity-0"></div>
                    <div class="w-4 h-0.5 bg-white transition-all duration-300 group-hover:-rotate-45 group-hover:-translate-y-1"></div>
                  </div>
                  <!-- X icon -->
                  <div class="absolute opacity-0 group-hover:opacity-100 transition-all duration-300 group-hover:rotate-180">
                    <div class="w-4 h-0.5 bg-white rotate-45"></div>
                    <div class="w-4 h-0.5 bg-white -rotate-45 -translate-y-0.5"></div>
                  </div>
                </div>
              </button>
              <div class="absolute top-full right-0 mt-2 w-48 bg-black border border-white rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 z-50">
                <nav class="p-3">
                  <div class="space-y-2">
                    <a href="/" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 group">
                      <div class="w-5 h-5 bg-white rounded flex items-center justify-center">
                        <i class="fas fa-home text-black text-xs"></i>
                      </div>
                      <span class="text-white text-sm font-medium">Home</span>
                    </a>
                    <a href="/about" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 group">
                      <div class="w-5 h-5 bg-white rounded flex items-center justify-center">
                        <i class="fas fa-info text-black text-xs"></i>
                      </div>
                      <span class="text-white text-sm font-medium">About</span>
                    </a>
                    <a href="/search" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 group">
                      <div class="w-5 h-5 bg-white rounded flex items-center justify-center">
                        <i class="fas fa-search text-black text-xs"></i>
                      </div>
                      <span class="text-white text-sm font-medium">Search</span>
                    </a>
                    <a href="/video" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 group">
                      <div class="w-5 h-5 bg-white rounded flex items-center justify-center">
                        <i class="fas fa-download text-black text-xs"></i>
                      </div>
                      <span class="text-white text-sm font-medium">Download</span>
                    </a>
                    <div class="border-t border-white/20 my-2"></div>
                    <a href="https://github.com/lt-syaii/tikio" target="_blank" rel="noopener noreferrer" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 group">
                      <div class="w-5 h-5 bg-white rounded flex items-center justify-center">
                        <i class="fab fa-github text-black text-xs"></i>
                      </div>
                      <span class="text-white text-sm font-medium">GitHub</span>
                    </a>
                  </div>
                </nav>
              </div>
            </div>
          </div>
          
          <div class="md:hidden mt-3 hidden transition-all duration-300 ease-in-out" id="mobile-menu">
            <div class="bg-black border border-white rounded-xl p-3 shadow-2xl backdrop-blur-sm">
              <nav class="flex flex-col space-y-1">
                <a href="/" onclick="closeMenu()" class="group flex items-center space-x-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 hover:scale-105 active:scale-95">
                  <div class="w-5 h-5 bg-white rounded flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:scale-110">
                    <i class="fas fa-home text-black text-xs transition-all duration-300 group-hover:text-black"></i>
                  </div>
                  <span class="text-white font-medium text-sm transition-all duration-300 group-hover:text-white">Home</span>
                </a>
                <a href="/about" onclick="closeMenu()" class="group flex items-center space-x-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 hover:scale-105 active:scale-95">
                  <div class="w-5 h-5 bg-white rounded flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:scale-110">
                    <i class="fas fa-info text-black text-xs transition-all duration-300 group-hover:text-black"></i>
                  </div>
                  <span class="text-white font-medium text-sm transition-all duration-300 group-hover:text-white">About</span>
                </a>
                <a href="/search" onclick="closeMenu()" class="group flex items-center space-x-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 hover:scale-105 active:scale-95">
                  <div class="w-5 h-5 bg-white rounded flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:scale-110">
                    <i class="fas fa-search text-black text-xs transition-all duration-300 group-hover:text-black"></i>
                  </div>
                  <span class="text-white font-medium text-sm transition-all duration-300 group-hover:text-white">Search</span>
                </a>
                <a href="/video" onclick="closeMenu()" class="group flex items-center space-x-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 hover:scale-105 active:scale-95">
                  <div class="w-5 h-5 bg-white rounded flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:scale-110">
                    <i class="fas fa-download text-black text-xs transition-all duration-300 group-hover:text-black"></i>
                  </div>
                  <span class="text-white font-medium text-sm transition-all duration-300 group-hover:text-white">Download</span>
                </a>
                <div class="border-t border-white/20 my-1"></div>
                <a href="https://github.com/lt-syaii/tikio" target="_blank" rel="noopener noreferrer" onclick="closeMenu()" class="group flex items-center space-x-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-300 hover:scale-105 active:scale-95">
                  <div class="w-5 h-5 bg-white rounded flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:scale-110">
                    <i class="fab fa-github text-black text-xs transition-all duration-300 group-hover:text-black"></i>
                  </div>
                  <span class="text-white font-medium text-sm transition-all duration-300 group-hover:text-white">GitHub</span>
                </a>
              </nav>
            </div>
          </div>
        </div>
      </header>
      <main class="flex-1">
        <slot />
      </main>
      <footer class="bg-black border-t border-white mt-auto">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4 sm:py-6">
          <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-3">
              <div class="w-6 h-6 bg-white rounded flex items-center justify-center">
                <i class="fas fa-download text-black text-xs"></i>
              </div>
              <h3 class="text-sm font-black text-white">TikIO</h3>
            </div>
            
            <nav class="flex items-center gap-4">
              <a href="/" class="text-white/70 hover:text-white transition-colors duration-300 text-xs">Home</a>
              <a href="/about" class="text-white/70 hover:text-white transition-colors duration-300 text-xs">About</a>
              <a href="/search" class="text-white/70 hover:text-white transition-colors duration-300 text-xs">Search</a>
              <a href="https://github.com/lt-syaii/tikio" target="_blank" rel="noopener noreferrer" class="text-white/70 hover:text-white transition-colors duration-300 text-xs">
                <i class="fab fa-github"></i>
              </a>
            </nav>
            
            <p class="text-white/60 text-xs text-center sm:text-right">
              © <span id="current-year">{new Date().getFullYear()}</span> TikIO by 
              <a href="https://github.com/lt-syaii" target="_blank" rel="noopener noreferrer" class="text-white hover:text-white/80 transition-colors duration-300">
                bang_syaii
              </a>
            </p>
          </div>
        </div>
      </footer>
    </div>
    <script>
      initCSSOptimization();
  
      function toggleMenu() {
        let menu = document.getElementById('mobile-menu');
        let hamburgerIcon = document.getElementById('hamburger-icon');
        
        if (menu.classList.contains('hidden')) {
          menu.classList.remove('hidden');
          setTimeout(() => {
            menu.style.opacity = '1';
            menu.style.transform = 'translateY(0)';
          }, 10);
          hamburgerIcon.style.transform = 'rotate(180deg)';
        } else {
          menu.style.opacity = '0';
          menu.style.transform = 'translateY(-10px)';
          setTimeout(() => {
            menu.classList.add('hidden');
          }, 300);
          hamburgerIcon.style.transform = 'rotate(0deg)';
        }
      }
      
      function closeMenu() {
        let menu = document.getElementById('mobile-menu');
        let hamburgerIcon = document.getElementById('hamburger-icon');
        menu.style.opacity = '0';
        menu.style.transform = 'translateY(-10px)';
        setTimeout(() => {
          menu.classList.add('hidden');
        }, 300);
        hamburgerIcon.style.transform = 'rotate(0deg)';
      }
      
      document.addEventListener('click', (e) => {
        let menu = document.getElementById('mobile-menu');
        let btn = document.querySelector('[onclick="toggleMenu()"]');
        
        if (!btn.contains(e.target) && !menu.contains(e.target)) {
          closeMenu();
        }
      });
    </script>
  </body>
</html>